"use strict";(()=>{var e={};e.id=170,e.ids=[170],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3479:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{GET:()=>p,POST:()=>l});var o=r(9303),a=r(8716),s=r(670),i=r(7070),u=r(4184),c=r(1150);async function p(e){try{await (0,u.Z)();let{searchParams:t}=new URL(e.url),r=t.get("type"),n=t.get("category"),o=t.get("language"),a=t.get("search"),s={};r&&"all"!==r&&(s.type=r),n&&(s.category=n),o&&(s.language=o),a&&(s.$or=[{title:{$regex:a,$options:"i"}},{description:{$regex:a,$options:"i"}},{tags:{$in:[RegExp(a,"i")]}}]);let p=await c.Z.find(s).sort({createdAt:-1});return i.NextResponse.json({success:!0,data:p},{status:200})}catch(e){return console.error("Error fetching content:",e),i.NextResponse.json({success:!1,error:"Failed to fetch content"},{status:500})}}async function l(e){try{let t=e.headers.get("x-admin-key");if("TELUGUDB123"!==t)return i.NextResponse.json({success:!1,error:"Unauthorized - Invalid admin key"},{status:401});await (0,u.Z)();let r=await e.json(),n=await c.Z.create(r);return i.NextResponse.json({success:!0,data:n,message:"Content created successfully"},{status:201})}catch(e){return console.error("Error creating content:",e),i.NextResponse.json({success:!1,error:"Failed to create content"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/content/route",pathname:"/api/content",filename:"route",bundlePath:"app/api/content/route"},resolvedPagePath:"D:\\telugudb\\src\\app\\api\\content\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:y,serverHooks:m}=d,h="/api/content/route";function f(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:y})}},4184:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1185),o=r.n(n);let a="mongodb+srv://Balujeswanth:Baluflix123@cluster0.hqqoxgl.mongodb.net/baluflix?retryWrites=true&w=majority";if(!a)throw Error("Please define the MONGODB_URI environment variable");let s=global.mongooseCache||{conn:null,promise:null};global.mongooseCache||(global.mongooseCache=s);let i=async function(){if(s.conn)return s.conn;s.promise||(s.promise=o().connect(a,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},1150:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(1185),o=r.n(n);let a=new n.Schema({episodeNumber:{type:Number,required:!0},episodeTitle:{type:String,required:!0},watchLink:{type:String,required:!0},downloadLink:{type:String,required:!0},quality:{type:String}}),s=new n.Schema({seasonNumber:{type:Number,required:!0},episodes:{type:[a],default:[]}}),i=new n.Schema({type:{type:String,required:!0,enum:["movie","series"]},title:{type:String,required:!0},poster:{type:String,required:!0},banner:{type:String},description:{type:String},year:{type:String},language:{type:String},category:{type:String},quality:{type:String},rating:{type:Number},tags:{type:[String],default:[]},watchLink:{type:String},downloadLink:{type:String},seasons:{type:[s],default:[]}},{timestamps:!0}),u=o().models.Content||o().model("Content",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(3479));module.exports=n})();